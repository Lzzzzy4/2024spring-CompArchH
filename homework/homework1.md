# 来泽远 PB21000164

## T1

### （1）

**指令1到指令2存在对于R1的RAW相关**

指令1到指令2存在对于R1的WAW相关

指令1到指令2存在对于R1的WAR相关

指令2到指令3存在对于R1的WAW相关

指令2到指令3存在对于R1的WAR相关

指令3到指令4存在对于R2的WAR相关

**指令4到指令5存在对于R2的RAW相关**

**指令5到指令6存在对于R4的RAW相关**

### （2）

RAW需要插入气泡，写优先即WB阶段可以读出寄存器值。

| LD    | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |      |      |      |      |      |      |
| ----- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| DADDI |      |      |      | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |      |      |      |
| SD    |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |      |      |
| DADDI |      |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |      |
| DSUB  |      |      |      |      |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |      |      |
| BENZ  |      |      |      |      |      |      |      |      |      |      |      | IF   | ID   | EX   | MEM  |
| LD    |      |      |      |      |      |      |      |      |      |      |      |      |      |      | IF   |

一次循环共14周期，执行$396/4=99$次。

总周期数为$14*99+2 = 1388$

### （3）

LD在上一条BNEZ的EX段执行取指令。

完整前递则指令1到2因load-use停顿一周期，其他不停。

总周期为$(6+1+1)*99+3=795$

### (4)

总周期数为$(6+1)*99+4=697$

## T2

$$
\begin{align}
& 1:C_1 = A_1+B_1 \\
& 2:C_2 = A_2+B_2 \\
& 3:C_3 = A_3+B_3 \\
& 4:C_4 = A_4+B_4 \\
& 5:D_1 = C_1*C_2 \\
& 6:D_2 = C_3*C_4 \\
& 7:D_3 = D_1*D_2 \\
\end{align}
$$



| 5                       |      |      | 1    | 2    | 3    | 4    |      |      | 5    |      | 6    |      |      |      |      | 7    |
| ----------------------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 4                       |      |      |      |      |      |      |      | 5    |      | 6    |      |      |      |      | 7    |      |
| 3                       |      |      |      |      |      | 5    | 5    | 6    | 6    |      |      |      | 7    | 7    |      |      |
| 2                       |      | 1    | 2    | 3    | 4    |      |      |      |      |      |      |      |      |      |      |      |
| 1                       | 1    | 2    | 3    | 4    | 5    |      | 6    |      |      |      |      | 7    |      |      |      |      |
| 功能段/时间($\Delta t$) | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    | 10   | 11   | 12   | 13   | 14   | 15   | 17   |

吞吐率：$7/17=0.412$

加速比：$(4*3+3*5)/17=1.588$

效率：$27/(5*17)=0.318$

## T3

### （1）

| sw   | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| lw   |      | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |      |
| beq  |      |      | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |
| add  |      |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |      |
| slt  |      |      |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |

总时间为：$11*200ps = 2200ps$

不可以消除，nop本身也要取指令，占用存储器。

### （2）

在ID判断

| sw   | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| lw   |      | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |
| beq  |      |      | IF   | ID   | EX   | MEM  | WB   |      |      |      |
| add  |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |      |
| slt  |      |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |

加速比：$11/10=1.1$

### （3）

$ID=180ps<200ps,EXE=140ps$，无变化

### （4）

$n=12,T=210ps,t=2520ps$

加速比：$(11*200)/2520=0.873$
